using System;
using static System.Runtime.InteropServices.JavaScript.JSType;

namespace Memory_game
{
    public class GörArray
    {
        public IBricka[] arraySpelplan { get; private set; } = new IBricka[12];
        public GörArray()
        {
            string input = Felhantering1();
            switch (Convert.ToInt32(input))
            {
                case 1:
                    NyArray(new IBricka[6] { new Bricka("Stjärna"), new Bricka("Måne"), new Bricka("Sol"), new Bricka("Moln"), new Bricka("Regnbåge"), new Bricka("Regn") });
                    break;
                case 2:
                    string[] arrayInput = Felhantering();
                    NyArray(new IBricka[] { new Bricka(arrayInput[0]), new Bricka(arrayInput[1]), new Bricka(arrayInput[2]), new Bricka(arrayInput[3]), new Bricka(arrayInput[4]), new Bricka(arrayInput[5]) });
                    break;
            }
        }
        public int RandomNumber()
        {
            Random random = new Random();
            int number = random.Next(0, 12);
            return number;
        }

        public void NyArray(IBricka[] objektArray)
        {
            for (int i = 0; i < this.arraySpelplan.Length; i++)
            {
                if (i < objektArray.Length)
                {
                    int number = RandomNumber();
                    if (this.arraySpelplan[number] == null)
                    {
                        this.arraySpelplan[number] = objektArray[i];
                    }
                    else
                    {
                        i--;
                    }
                }
                else
                {
                    int number = RandomNumber();
                    if (this.arraySpelplan[number] == null)
                    {
                        this.arraySpelplan[number] = objektArray[i - objektArray.Length];
                    }
                    else
                    {
                        i--;
                    }
                }
            }
        }
        public string Felhantering1()
        {
            Console.WriteLine("Hur vill du att brickorna på spelplanen ska se ut? Välj ett alternativ:\nTryck 1 för att spela på en förutbestämd spelplan\nTryck 2 för att välja egna ord/symboler på brickorna");
            string input = Console.ReadLine();
            if (input == null || input == "")
            {
                Console.WriteLine("Du måste välja ett alternativ. Försök igen.");
                return Felhantering1();
            }
            else if (!int.TryParse(input, out int number) || Convert.ToInt32(input) > 2)
            {
                Console.WriteLine("Du har inte valt ett giltigt alterantiv. Försök igen.");
                return Felhantering1();
            }
            return input;
        }

        public string[] Felhantering()
        {
            Console.WriteLine("Ange 6st olika ord/symboler, ange mellanslag mellan orden. Du kan inte välja siffror");
            string inputFromUser = Console.ReadLine();
            if (inputFromUser == null)
            {
                Console.WriteLine("Du måste ange ord eller symboler. Försök igen.");
                Felhantering();
            }
            else if (inputFromUser.Any(char.IsDigit))
            {
                Console.WriteLine("Du kan inte välja siffror. Försök igen.");
                Felhantering();
            }
            else if (inputFromUser.Split().Length < 6)
            {
                Console.WriteLine("Du måste ange 6st ord/symboler. Försök igen.");
                Felhantering();
            }
            return inputFromUser.Split();
        }
    }
}

